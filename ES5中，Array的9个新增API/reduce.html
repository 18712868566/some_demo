<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>reduce说明</title>
</head>
<body>
<p>请按F12查看console</p>
<button onclick="ReduceAdd()">点击调用reduce，将数组的值累加，然后返回累加结果</button>
<br/>
<button onclick="ReduceMul()">点击调用reduce，输出阶乘的结果</button>
<br/>
<button onclick="ReduceMinus()">点击调用reduce，从初始值100中减去数组中每个元素的值</button>
<script>
    var arr = [1, 2, 3, 4];
    console.log("源数组为：[" + arr + "]");

    function ReduceArr(callback) {
        console.log("注：请记住，数组的第一个元素索引为0");
        var result = arr.reduce(function (previousValue, item, index, Array) {
            //以下四个console同forEach，故注释掉省略。如果需要查看，请自行删除注释状态即可
            //console.log(currentValue);    //当前元素
            //console.log(index);     //当前元素的索引
            //console.log(Array);  //遍历的数组
//            console.log(this);
            console.log("当前元素索引为：" + index + "，当前累计的结果（未计入当前元素）为：" + previousValue);
            return callback(previousValue, item);
        });
        console.log("输出结果：");
        console.log(result);
    }

    function ReduceAdd() {
        console.log("当前执行：将数组每个元素加在一起的运算")
        ReduceArr(function (previousValue, currentValue) {
            return previousValue + currentValue;
        })
    }

    function ReduceMul() {
        console.log("当前执行：将数组每个元素乘在一起的运算")
        ReduceArr(function (previousValue, currentValue) {
            return previousValue * currentValue;
        })
    }

    function ReduceMinus() {
        console.log("当前执行：从初始值100中，减去数组中每个元素的值的运算")
        console.log("注：请记住，数组的第一个元素索引为0");
        var initialValue = 100;
        var result = arr.reduce(function (previousValue, item, index, Array) {
            console.log("当前元素索引为：" + index + "，当前累计的结果（未计入当前元素）为：" + previousValue);
            return previousValue - item;
        }, initialValue);
        console.log("输出结果：");
        console.log(result);
    }
</script>
</body>
</html>